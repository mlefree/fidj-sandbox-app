{"version":3,"sources":["webpack:///src/app/profile/profile.module.ts","webpack:///src/app/profile/profile.page.ts","webpack:///src/app/profile/profile.page.html","webpack:///src/app/profile/profile-routing.module.ts","webpack:///src/app/profile/profile.page.scss"],"names":["ProfilePageModule","imports","declarations","ProfilePage","router","fidjService","refresh","event","getIdToken","idToken","payload","split","payloadInfo","JSON","parse","decode","console","log","name","profileUsername","warn","code","logout","target","complete","navigateByUrl","selector","template","routes","path","component","ProfilePageRoutingModule","forChild","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAmBaA,iBAAiB;AAAA;AAAA,O;;AAAjBA,uBAAiB,6DAV7B,+DAAS;AACRC,eAAO,EAAE,CACP,0DADO,EAEP,4DAFO,EAGP,0DAHO,EAIP,2GAJO,EAKP,gFALO,CADD;AAQRC,oBAAY,EAAE,CAAC,yDAAD;AARN,OAAT,CAU6B,GAAjBF,iBAAiB,CAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCVAG,WAAW;AAItB,6BACUC,MADV,EAEUC,WAFV,EAEoC;AAAA;;AAD1B,eAAAD,MAAA,GAAAA,MAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACR,eAAKC,OAAL,CAAa,IAAb;AACD;;AARqB;AAAA;AAAA,iBAUhB,iBAAQC,KAAR,EAAe;;;;;;;;;AAED,6BAAM,KAAKF,WAAL,CAAiBG,UAAjB,EAAN;;;AAAVC,6B;AACAC,6B,GAAUD,OAAO,CAACE,KAAR,CAAc,GAAd,EAAmB,CAAnB,C;AACVC,iC,GAAcC,IAAI,CAACC,KAAL,CAAW,4CAAOC,MAAP,CAAcL,OAAd,CAAX,C;AACpBM,6BAAO,CAACC,GAAR,CAAY,OAAOL,WAAnB,EAAgCA,WAAW,CAACM,IAA5C;AACA,2BAAKC,eAAL,GAAuBP,WAAW,CAACM,IAAnC;;;;;;;AAEAF,6BAAO,CAACI,IAAR;;4BACI,YAAMC,IAAN,KAAe,GAAf,IAAsB,YAAMA,IAAN,KAAe,G;;;;;;AACvC,6BAAM,KAAKC,MAAL,EAAN;;;AAIJ,0BAAIf,KAAJ,EAAW;AACTA,6BAAK,CAACgB,MAAN,CAAaC,QAAb;AACD;;;;;;;;;AACF;AA3BqB;AAAA;AAAA,iBA6BhB,kBAAS;;;;;;;AACb,6BAAM,KAAKnB,WAAL,CAAiBiB,MAAjB,EAAN;;;;AACA,6BAAM,KAAKlB,MAAL,CAAYqB,aAAZ,CAA0B,GAA1B,CAAN;;;;;;;;;AACD;AAhCqB;;AAAA;AAAA,S;;;;gBARhB;;gBACQ;;;;AAOHtB,iBAAW,6DALvB,gEAAU;AACTuB,gBAAQ,EAAE,aADD;AAETC,gBAAQ,EAAR,qEAFS;;AAAA,OAAV,CAKuB,GAAXxB,WAAW,CAAX;;;;;;;;;;;;;;;;ACTb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIf,UAAMyB,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,wBAAwB;AAAA;AAAA,O;;AAAxBA,8BAAwB,6DAJpC,+DAAS;AACR9B,eAAO,EAAE,CAAC,6DAAa+B,QAAb,CAAsBJ,MAAtB,CAAD,CADD;AAERK,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIoC,GAAxBF,wBAAwB,CAAxB;;;;;;;;;;;;;;;;ACfb;AAAe;;;AAAA","file":"profile-profile-module-es5.js","sourcesContent":["import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ProfilePage } from './profile.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { ProfilePageRoutingModule } from './profile-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    ProfilePageRoutingModule\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","import {Component} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {Base64, FidjService} from 'fidj';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: 'profile.page.html',\n  styleUrls: ['profile.page.scss']\n})\nexport class ProfilePage {\n\n  public profileUsername: string;\n\n  constructor(\n    private router: Router,\n    private fidjService: FidjService) {\n    this.refresh(null);\n  }\n\n  async refresh(event) {\n    try {\n      const idToken = await this.fidjService.getIdToken();\n      const payload = idToken.split('.')[1];\n      const payloadInfo = JSON.parse(Base64.decode(payload));\n      console.log(typeof payloadInfo, payloadInfo.name);\n      this.profileUsername = payloadInfo.name;\n    } catch (error) {\n      console.warn(error);\n      if (error.code === 401 || error.code === 403) {\n        await this.logout();\n      }\n    }\n\n    if (event) {\n      event.target.complete();\n    }\n  }\n\n  async logout() {\n    await this.fidjService.logout();\n    await this.router.navigateByUrl('/');\n  }\n\n}\n","export default \"<ion-header [translucent]=\\\"true\\\">\\n    <ion-toolbar>\\n        <ion-title>\\n            <img src=\\\"assets/icon/favicon.png\\\" height=\\\"15em\\\"> My profile\\n        </ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n    <!-- Default Refresher -->\\n    <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refresh($event)\\\">\\n        <ion-refresher-content></ion-refresher-content>\\n    </ion-refresher>\\n\\n    <ion-header collapse=\\\"condense\\\">\\n        <ion-toolbar>\\n            <ion-title size=\\\"large\\\">Profile</ion-title>\\n        </ion-toolbar>\\n    </ion-header>\\n\\n    <form #profileForm=\\\"ngForm\\\">\\n        <ion-grid>\\n            <ion-row>\\n                <ion-col size-md=\\\"8\\\" offset-md=\\\"2\\\" size-sm=\\\"12\\\">\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-item>\\n                                <ion-label>User</ion-label>\\n                                <ion-input id=\\\"profileUsername\\\"\\n                                           [(ngModel)]=\\\"profileUsername\\\" name=\\\"profileUsername\\\" disabled></ion-input>\\n                            </ion-item>\\n                            <ion-item>\\n                                <pre><small>App is using <a href=\\\"https://fidj.ovh\\\">Fidj service</a> that take care of GDPR concerns.</small></pre>\\n                            </ion-item>\\n                        </ion-col>\\n                    </ion-row>\\n\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"logout()\\\">Logout</ion-button>\\n                        </ion-col>\\n                    </ion-row>\\n\\n                </ion-col>\\n            </ion-row>\\n        </ion-grid>\\n    </form>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ProfilePageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Byb2ZpbGUvcHJvZmlsZS5wYWdlLnNjc3MifQ== */\";"]}